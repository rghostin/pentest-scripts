#! /usr/bin/env bash

set -o errexit # abort on nonzero exitstatus
set -o nounset # abort on unbound variable


function host_is_up {
  ping -c 1 -w 1 "${ip}" > /dev/null 2>&1
}


if [ "$#" -ne "1" ]; then
    echo "Usage: ${0} <range>"
    echo "	<range>  /24 IP range, eg 192.168.0"
    exit 1
fi

base_range="${1}"

for host in $(seq 1 254); do
  ip="${base_range}.${host}"
  if host_is_up "${ip}"; then
    echo -e "\n${ip}"
  else
    echo -n "${host},"
  fi
done