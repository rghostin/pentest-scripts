#!/bin/bash

##########################################################
# 1 -append to /etc/NetworkManager/NetworkManager.conf
##########################################################
#[device]
#wifi.scan-rand-mac-address=no
#
#[connection]
#ethernet.cloned-mac-address=preserve
#wifi.cloned-mac-address=preserve
#########################################################
# 2 - service NetworkManager restart
#########################################################


set -e

if [ $# -ne 1 ]; then
	echo "Error - Usage: sudo $0 <iface>"
	exit 1
fi

IFACE="$1"

echo "[*] Bringing $IFACE down"
sudo ip link set dev "$IFACE" down

echo "[*} Changing MAC"
sudo macchanger --bia -A "$IFACE"

echo "[*] Bringing $IFACE back up"
sudo ip link set dev "$IFACE" up

echo "[*}Done"
